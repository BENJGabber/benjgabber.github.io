<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Portfolio - √âtudiant Bac Pro CIEL</title>
    <link rel="stylesheet" href="../style.css" />
</head>

<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo"><a href="#accueil">Mon Portfolio</a></div>
            <ul class="nav-links" id="navLinks">
                <li><a href="../index.html">Accueil</a></li>
                <li><a href="../index.html#apropos">√Ä propos</a></li>
                <li><a href="#">Parcours et Experiences</a></li>
                <li><a href="#">Articles</a></li>
                <li><a href="#contact">Contact</a></li>
                <button class="theme-toggle" id="themeToggle" aria-label="Changer de th√®me">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
            </ul>
            <div class="menu-toggle" id="menuToggle">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
        </div>
    </nav>

    <!-- Side Menu -->
    <div class="side-menu" id="sideMenu">
        <ul class="side-nav-links">
            <li><a href="../index.html">Accueil</a></li>
            <li><a href="../index.html#apropos">√Ä propos</a></li>
            <li><a href="#">Parcours et Experiences</a></li>
            <li><a href="#projets">Projets</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </div>

    <!-- Forum Section -->
    <section id="forum" class="forum-section">
        <div class="container">
            <h1 class="section-title">Articles & Projets</h1>
            <p class="section-subtitle">D√©couvrez mes r√©alisations et articles techniques en temps r√©el</p>

            <!-- Controls -->
            <div class="controls">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="üîç Rechercher un article...">
                </div>
                <button class="refresh-btn" id="refreshBtn">
                    üîÑ Actualiser
                </button>
            </div>

            <!-- Loading State -->
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Chargement des articles...</p>
            </div>

            <!-- Articles Grid -->
            <div class="articles-grid" id="articlesGrid"></div>

            <!-- No Results -->
            <div class="no-results" id="noResults" style="display: none;">
                <h3>Aucun article trouv√©</h3>
                <p>Essayez une autre recherche ou actualisez la page</p>
            </div>
        </div>
    </section>

    <script>
        // State
        let allArticles = [];
        let filteredArticles = [];

        // Elements
        const loading = document.getElementById('loading');
        const articlesGrid = document.getElementById('articlesGrid');
        const noResults = document.getElementById('noResults');
        const searchInput = document.getElementById('searchInput');
        const refreshBtn = document.getElementById('refreshBtn');

        // Fetch articles from API
        async function fetchArticles() {
            try {
                loading.style.display = 'block';
                articlesGrid.style.display = 'none';
                noResults.style.display = 'none';

                // Using JSONPlaceholder as demo API
                // Replace this URL with your actual forum API endpoint
                const response = await fetch('https://jsonplaceholder.typicode.com/posts');
                
                if (!response.ok) {
                    throw new Error('Erreur lors du chargement');
                }

                const data = await response.json();
                
                // Limit to 12 articles for demo
                allArticles = data.slice(0, 12).map(post => ({
                    id: post.id,
                    title: post.title,
                    body: post.body,
                    author: `Utilisateur ${post.userId}`,
                    date: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000).toLocaleDateString('fr-FR')
                }));

                filteredArticles = [...allArticles];
                displayArticles();
            } catch (error) {
                console.error('Erreur:', error);
                loading.innerHTML = `
                    <div style="color: #ef4444;">
                        <h3>‚ùå Erreur de chargement</h3>
                        <p>Impossible de charger les articles. V√©rifiez votre connexion.</p>
                    </div>
                `;
            }
        }

        // Display articles
        function displayArticles() {
            loading.style.display = 'none';

            if (filteredArticles.length === 0) {
                articlesGrid.style.display = 'none';
                noResults.style.display = 'block';
                return;
            }

            articlesGrid.style.display = 'grid';
            noResults.style.display = 'none';

            articlesGrid.innerHTML = filteredArticles.map(article => `
                <div class="article-card" onclick="openArticle(${article.id})">
                    <div class="article-header">
                        <div class="article-id">#${article.id}</div>
                    </div>
                    <h3 class="article-title">${capitalizeFirst(article.title)}</h3>
                    <p class="article-body">${truncate(article.body, 150)}</p>
                    <div class="article-meta">
                        <span class="article-author">üë§ ${article.author}</span>
                        <span class="article-date">üìÖ ${article.date}</span>
                    </div>
                </div>
            `).join('');
        }

        // Search functionality
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            
            filteredArticles = allArticles.filter(article => 
                article.title.toLowerCase().includes(searchTerm) ||
                article.body.toLowerCase().includes(searchTerm)
            );
            
            displayArticles();
        });

        // Refresh button
        refreshBtn.addEventListener('click', () => {
            searchInput.value = '';
            fetchArticles();
        });

        // Open article (you can customize this to open in modal or new page)
        function openArticle(id) {
            const article = allArticles.find(a => a.id === id);
            alert(`Article #${id}\n\nTitre: ${article.title}\n\n${article.body}\n\n(Vous pouvez modifier cette fonction pour ouvrir une page d√©taill√©e ou un modal)`);
        }

        // Utility functions
        function capitalizeFirst(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function truncate(str, maxLength) {
            if (str.length <= maxLength) return str;
            return str.substr(0, maxLength) + '...';
        }

        // Initialize
        fetchArticles();

        // Auto-refresh every 5 minutes (optional)
        // setInterval(fetchArticles, 5 * 60 * 1000);
    </script>
</body>
</html>
